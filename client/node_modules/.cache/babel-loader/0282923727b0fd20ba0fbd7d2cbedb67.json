{"remainingRequest":"/home/minht/Projects/vue/mevn-blog/client/node_modules/babel-loader/lib/index.js!/home/minht/Projects/vue/mevn-blog/client/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/minht/Projects/vue/mevn-blog/client/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/minht/Projects/vue/mevn-blog/client/src/pages/Write.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/minht/Projects/vue/mevn-blog/client/src/pages/Write.vue","mtime":1637923711523},{"path":"/home/minht/Projects/vue/mevn-blog/client/babel.config.js","mtime":1637681222245},{"path":"/home/minht/Projects/vue/mevn-blog/client/node_modules/cache-loader/dist/cjs.js","mtime":1635854546509},{"path":"/home/minht/Projects/vue/mevn-blog/client/node_modules/babel-loader/lib/index.js","mtime":1635854546514},{"path":"/home/minht/Projects/vue/mevn-blog/client/node_modules/cache-loader/dist/cjs.js","mtime":1635854546509},{"path":"/home/minht/Projects/vue/mevn-blog/client/node_modules/vue-loader/lib/index.js","mtime":1635854563590}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvbWluaHQvUHJvamVjdHMvdnVlL21ldm4tYmxvZy9jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi51cmwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLXNlYXJjaC1wYXJhbXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgQmxvZ1NlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvQmxvZ1NlcnZpY2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIldyaXRlIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdXNlcm5hbWU6ICIiLAogICAgICB0aXRsZTogIiIsCiAgICAgIGRlc2M6ICIiLAogICAgICBmaWxlOiAiIiwKICAgICAgcG9zdF9waG90bzogIiIKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbInVzZXIiXSkpLAogIG1ldGhvZHM6IHsKICAgIG9uRmlsZVNlbGVjdGVkOiBmdW5jdGlvbiBvbkZpbGVTZWxlY3RlZChldmVudCkgewogICAgICB0aGlzLmZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIGNvbnNvbGUubG9nKGV2ZW50LnRhcmdldC5maWxlc1swXSk7CiAgICAgIHZhciBkYXRhID0gVVJMLmNyZWF0ZU9iamVjdFVSTChldmVudC50YXJnZXQuZmlsZXNbMF0pOwogICAgICB0aGlzLnBvc3RfcGhvdG8gPSBkYXRhOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIG5ld1Bvc3QgPSB7CiAgICAgICAgdXNlcm5hbWU6IHRoaXMudXNlci51c2VybmFtZSwKICAgICAgICB0aXRsZTogdGhpcy50aXRsZSwKICAgICAgICBkZXNjOiB0aGlzLmRlc2MKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLmZpbGUpIHsKICAgICAgICB2YXIgZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICAgIHZhciBmaWxlbmFtZSA9IERhdGUubm93KCkgKyB0aGlzLmZpbGUubmFtZTsKICAgICAgICBkYXRhLmFwcGVuZCgibmFtZSIsIGZpbGVuYW1lKTsKICAgICAgICBkYXRhLmFwcGVuZCgiZmlsZSIsIHRoaXMuZmlsZSk7CiAgICAgICAgbmV3UG9zdC5waG90byA9IGZpbGVuYW1lOwogICAgICAgIEJsb2dTZXJ2aWNlLnBvc3RGaWxlKGRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygiVGhlcmUgd2FzIGFuIGVycm9yOiIgKyBlcnJvci5yZXMpOwogICAgICAgIH0pOwogICAgICB9CgogICAgICBCbG9nU2VydmljZS5uZXdQb3N0KG5ld1Bvc3QpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL3Bvc3QvIiArIHJlcy5kYXRhLl9pZCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKCJUaGVyZSB3YXMgYW4gZXJyb3I6IiArIGVycm9yLnJlcyk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Write.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,WAAA,MAAA,yBAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,OADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,QAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,IAAA,EAAA,EAJA;AAKA,MAAA,UAAA,EAAA;AALA,KAAA;AAOA,GAVA;AAWA,EAAA,QAAA,oBACA,UAAA,CAAA,CAAA,MAAA,CAAA,CADA,CAXA;AAcA,EAAA,OAAA,EAAA;AACA,IAAA,cADA,0BACA,KADA,EACA;AACA,WAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,IAAA,GAAA,GAAA,CAAA,eAAA,CAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA,CAAA;AACA,WAAA,UAAA,GAAA,IAAA;AACA,KANA;AAOA,IAAA,YAPA,0BAOA;AAAA;;AACA,UAAA,OAAA,GAAA;AACA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA,QADA;AAEA,QAAA,KAAA,EAAA,KAAA,KAFA;AAGA,QAAA,IAAA,EAAA,KAAA;AAHA,OAAA;;AAKA,UAAA,KAAA,IAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,QAAA,EAAA;AACA,YAAA,QAAA,GAAA,IAAA,CAAA,GAAA,KAAA,KAAA,IAAA,CAAA,IAAA;AAEA,QAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,QAAA;AACA,QAAA,IAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,IAAA;AACA,QAAA,OAAA,CAAA,KAAA,GAAA,QAAA;AAEA,QAAA,WAAA,CAAA,QAAA,CAAA,IAAA,EACA,IADA,CACA,YAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,IAAA;AACA,SAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,KAAA,CAAA,GAAA;AACA,SANA;AAOA;;AACA,MAAA,WAAA,CAAA,OAAA,CAAA,OAAA,EACA,IADA,CACA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA,WAAA,GAAA,CAAA,IAAA,CAAA,GAAA;AACA,OAHA,EAIA,KAJA,CAIA,UAAA,KAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,wBAAA,KAAA,CAAA,GAAA;AACA,OANA;AAOA;AApCA;AAdA,CAAA","sourcesContent":["<template>\n  <div class=\"write\">\n    <img v-if=\"file\" class=\"write-img\" :src=\"post_photo\" alt=\"\" />\n    <form class=\"write-form\" @submit.prevent=\"handleSubmit\">\n      <div class=\"write-form-group\">\n        <label for=\"fileInput\">\n          <i class=\"write-icon fas fa-plus\"></i>\n        </label>\n        <input\n          id=\"fileInput\"\n          type=\"file\"\n          style=\"display: none\"\n          @change=\"onFileSelected\"\n        />\n        <input\n          class=\"write-input\"\n          placeholder=\"Title\"\n          type=\"text\"\n          autoFocus=\"true\"\n          v-model=\"title\"\n        />\n      </div>\n      <div class=\"write-form-group\">\n        <textarea\n          class=\"write-input write-text\"\n          placeholder=\"Tell your story...\"\n          type=\"text\"\n          autoFocus=\"true\"\n          v-model=\"desc\"\n        />\n      </div>\n      <button class=\"write-submit\" type=\"submit\">Publish</button>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { mapGetters } from \"vuex\";\nimport BlogService from \"../services/BlogService\";\n\nexport default {\n  name: \"Write\",\n  data() {\n    return {\n      username: \"\",\n      title: \"\",\n      desc: \"\",\n      file: \"\",\n      post_photo: \"\",\n    };\n  },\n  computed: {\n    ...mapGetters([\"user\"]),\n  },\n  methods: {\n    onFileSelected(event) {\n      this.file = event.target.files[0];\n      console.log(event.target.files[0]);\n      const data = URL.createObjectURL(event.target.files[0]);\n      this.post_photo = data;\n    },\n    handleSubmit() {\n      const newPost = {\n        username: this.user.username,\n        title: this.title,\n        desc: this.desc,\n      };\n      if (this.file) {\n        const data = new FormData();\n        const filename = Date.now() + this.file.name;\n\n        data.append(\"name\", filename);\n        data.append(\"file\", this.file);\n        newPost.photo = filename;\n\n        BlogService.postFile(data)\n          .then(() => {\n            console.log(data);\n          })\n          .catch((error) => {\n            console.log(\"There was an error:\" + error.res);\n          });\n      }\n      BlogService.newPost(newPost)\n        .then((res) => {\n          this.$router.push(\"/post/\" + res.data._id);\n        })\n        .catch((error) => {\n          console.log(\"There was an error:\" + error.res);\n        });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.write {\n  padding-top: 50px;\n}\n\n.write-img {\n  margin-left: 150px;\n  width: 70vw;\n  height: 250px;\n  border-radius: 10px;\n  object-fit: cover;\n}\n\n.write-form {\n  position: relative;\n}\n\n.write-form-group {\n  margin-left: 150px;\n  display: flex;\n  align-items: center;\n}\n\n.write-icon {\n  width: 25px;\n  height: 25px;\n  font-size: 20px;\n  border: 1px solid;\n  border-radius: 50%;\n  color: rgb(129, 125, 125);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n}\n\n.write-input {\n  font-size: 30px;\n  border: none;\n  padding: 20px;\n  width: 70vw;\n}\n\n.write-input::placeholder {\n  color: rgb(189, 185, 185);\n  font-weight: 400;\n}\n\n.write-input:focus {\n  outline-style: none;\n}\n\n.write-text {\n  width: 70vw;\n  height: 100vh;\n  font-family: inherit;\n  font-size: 20px;\n}\n\n.write-submit {\n  position: absolute;\n  top: 20px;\n  right: 50px;\n  color: white;\n  background-color: teal;\n  padding: 10px;\n  border: none;\n  border-radius: 10px;\n  font-size: 16px;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n}\n</style>"],"sourceRoot":"src/pages"}]}